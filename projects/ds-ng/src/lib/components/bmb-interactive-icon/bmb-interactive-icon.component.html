<ng-template #commonContent>
  @if (isImage(icon())) {
    <figure class="bmb_interactive_icon-box">
      <img [src]="icon()" [alt]="title()" class="bmb_interactive_icon-image" />
    </figure>
  } @else {
    <span class="bmb_interactive_icon-box">
      <bmb-icon
        [icon]="icon()"
        [size]="32"
        [dotNotification]="dotNotification()"
      />
      @if (label()) {
        <span class="bmb_interactive_icon-label">{{ label() }}</span>
      }
    </span>
  }
  @if (title() || description()) {
    <span class="bmb_interactive_icon-text">
      @if (title()) {
        <span class="bmb_interactive_icon-title">{{ title() }}</span>
      }
      <span
        class="bmb_interactive_icon-description"
        *ngIf="description() && horizontal()"
      >
        {{ description() }}
      </span>
    </span>
  }
</ng-template>

@if (setButtonTemplate()) {
  <button
    [ngClass]="getClasses()"
    [class.bmb_interactive_icon-horizontal]="horizontal()"
    (click)="handleClick()"
  >
    <ng-container *ngTemplateOutlet="commonContent" />
  </button>
} @else if (isExternalLink(link() || "")) {
  <a
    [ngClass]="getClasses()"
    [class.bmb_interactive_icon-horizontal]="horizontal()"
    [href]="link()"
    [target]="target() || '_blank'"
    rel="noopener noreferrer"
  >
    <ng-container *ngTemplateOutlet="commonContent" />
  </a>
} @else {
  <a
    [ngClass]="getClasses()"
    [class.bmb_interactive_icon-horizontal]="horizontal()"
    [routerLink]="link()"
    routerLinkActive="active-link"
    [routerLinkActiveOptions]="{ exact: true }"
  >
    <ng-container *ngTemplateOutlet="commonContent" />
  </a>
}
