@use "../../../assets/styles/base/fonts" as fonts;
@use "../../../assets/styles/base/mixins" as mixins;
@use "../../../assets/styles/base/rem" as rem;

// Mixins for mobile
@mixin content() {
  cursor: pointer;
  top: 10%;
  width: rem.rem_calc(28);
}

@mixin isOpen() {
  height: 100vh;
  overflow: auto;
  padding: rem.rem_calc(24);
  top: 0;
  width: 100%;

  .bmb_sidebar-button {
    border-bottom: rem.rem_calc(1) solid RGBA(var(--color-charade-800));
    height: rem.rem_calc(40);
    justify-content: space-between;
    margin-bottom: rem.rem_calc(16);
    padding: rem.rem_calc(8 8 16 8);

    &-icon {
      font-size: rem.rem_calc(24);
    }
  }

  .bmb_sidebar-text {
    opacity: 1;
    overflow: hidden;
    visibility: visible;
  }
}

@mixin list() {
  margin: rem.rem_calc(16 0 0 0);
}

.bmb_sidebar {
  background-color: RGBA(var(--color-black-primary));
  border-radius: rem.rem_calc(0 8 8 0);
  left: 0;
  position: fixed;
  transition: width 0.3s ease;
  z-index: 1;

  &-body-hide {
    overflow: hidden;
  }

  &-mobile {
    @include content();

    @media (max-height: 630px) {
      @include content();
    }

    &.bmb_sidebar-open {
      @include isOpen();

      @media (max-height: 630px) {
        @include isOpen();
      }
    }

    .bmb_sidebar-button {
      align-items: center;
      display: flex;
      height: rem.rem_calc(72);
      justify-content: center;
      margin: 0;
      padding: 0;
      width: 100%;

      &-icon {
        color: RGBA(var(--color-white-primary));
        font-size: rem.rem_calc(16);
      }

      &-text {
        color: RGBA(var(--color-white-primary));
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        @include fonts.font(6, semibold);
      }
    }

    .bmb_sidebar-list {
      @include list();

      @media (max-height: 630px) {
        @include list();
      }
    }

    .bmb_sidebar-children {
      height: 100vh;
      left: 0;
      position: fixed;
      top: 0;
      width: 100vw;

      &-open {
        display: flex;
      }
    }
  }

  &-desktop {
    cursor: auto;
    display: none;
    height: rem.rem_calc(480);
    overflow: hidden;
    padding: rem.rem_calc(24);
    top: 50%;
    transform: translateY(-50%);
    width: rem.rem_calc(88);

    &:hover,
    &.active {
      height: rem.rem_calc(480);
      overflow: visible;
      width: rem.rem_calc(280);

      .bmb_sidebar-text {
        opacity: 1;
        overflow: hidden;
        visibility: visible;
      }

      .bmb_sidebar-item {
        width: rem.rem_calc(232);
      }
    }

    .bmb_sidebar-item {
      position: relative;
    }

    .bmb_sidebar-link {
      &:hover {
        + .bmb_sidebar-children {
          border-radius: rem.rem_calc(0 24 24 0);
          display: flex;
          left: 100%;
          position: absolute;
          top: 0;
          width: rem.rem_calc(264);
        }
      }
    }

    .bmb_sidebar-children-open {
      border-radius: rem.rem_calc(0 24 24 0);
      display: flex;
      left: 100%;
      position: absolute;
      top: 0;
      width: rem.rem_calc(264);
    }

    .bmb_sidebar-title {
      display: none;
    }
  }

  &-list {
    display: flex;
    flex-flow: column;
    list-style-type: none;
    margin: 0;
    padding: 0;

    &:nth-of-type(n + 2) {
      border-top: rem.rem_calc(1) solid RGBA(var(--color-charade-800));
      margin-top: rem.rem_calc(16);
      padding-top: rem.rem_calc(16);
    }
  }

  &-item {
    align-items: center;
    display: flex;
    height: rem.rem_calc(40);
    justify-content: flex-start;
    width: auto;
  }

  &-link {
    align-items: center;
    color: RGBA(var(--color-white-primary));
    cursor: pointer;
    display: flex;
    height: 100%;
    justify-content: flex-start;
    text-align: left;
    text-decoration: none;
    transition: all 0.3s ease;
    width: 100%;

    &:hover,
    &-active {
      background-color: RGBA(var(--color-white-primary));
      border-radius: rem.rem_calc(24);
      color: RGBA(var(--color-black-primary));
    }
  }

  &-icon,
  &-arrow {
    font-size: rem.rem_calc(24);
    padding: rem.rem_calc(0 8);
  }

  &-text {
    display: block;
    flex: 1;
    opacity: 0;
    text-overflow: ellipsis;
    visibility: hidden;
    white-space: nowrap;
    width: rem.rem_calc(132);
    @include fonts.font(4, medium);
  }

  &-children {
    background-color: RGBA(var(--color-black-primary));
    display: none;
    flex-flow: column;
    padding: rem.rem_calc(24);
  }

  &-title {
    align-items: center;
    border-bottom: rem.rem_calc(1) solid RGBA(var(--color-charade-800));
    color: RGBA(var(--color-white-primary));
    display: flex;
    height: rem.rem_calc(40);
    justify-content: space-between;
    margin-bottom: rem.rem_calc(16);
    padding: rem.rem_calc(8 8 16 8);

    &-button {
      color: RGBA(var(--color-white-primary));
      padding: 0;

      .bmb_sidebar-icon {
        padding: 0;
      }
    }

    .bmb_sidebar-text {
      display: flex;
      > span {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }
    }
  }

  @include mixins.media-query(1000, "min") {
    &-mobile {
      display: none;
    }

    &-desktop {
      display: block;
    }
  }

  @media (max-height: 630px) {
    &-mobile {
      display: block;
    }

    &-desktop {
      display: none;
    }
  }
}
