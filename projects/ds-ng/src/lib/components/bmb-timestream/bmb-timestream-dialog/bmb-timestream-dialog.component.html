@if (!!event) {
  <section class="bmb_timestream-dialog-container">
    <figure class="bmb_timestream-dialog-container-hero">
      <img [src]="event.image" [alt]="event.title" class="bmb_timestream-dialog-container-image">
    </figure>
    <button class="bmb_timestream-dialog-container-close" (click)="handleCloseEvent()">
      <bmb-icon icon="close" />
    </button>
    <section class="bmb_timestream-dialog-container-content">
      <h2 class="bmb_timestream-dialog-container-title">{{ event.title }}</h2>
      <div class="bmb_timestream-dialog-container-user">
        <figure class="bmb_timestream-dialog-container-user-picture">
          <img class="bmb_timestream-dialog-container-user-image" [src]="event.picture_profile" [alt]="event.user_first_name">
        </figure>
        <span class="bmb_timestream-dialog-container-user-name">{{ event.user_first_name }} {{ event.user_last_name }}</span>
        <span class="bmb_timestream-dialog-container-user-date">{{ event.startEvent?.toFormat('dd/MM/yyyy') }}</span>
      </div>
      <bmb-tabs [tabs]="eventTabs" (selected)="handleTabSelected($event)" style="flex: 1">
        @switch (tabSelected) {
          @case (1) {
            <div class="bmb_timestream-dialog-container-tab-content">
              <p>{{ event.description }}</p>
              <p class="bmb_timestream-dialog-container-tab-tags">
                <bmb-badge
                  [custom]="true"
                  [text]="formatBadgeText(event.type)"
                  [customBackground]="appearanceBadgeText(event.type)"
                  [customColor]="
                    event.type === 'flexible'
                      ? 'black-primary'
                      : 'white-primary'
                  "
                />
                @for (tag of event.tags; track $index) {
                  <bmb-badge [text]="formatBadgeText(event.type)" appearance="normal"/>
                }
              </p>
            </div>
          }
          @case (2) {
            <div class="bmb_timestream-dialog-container-tab-content">
              <h3 class="bmb_timestream-dialog-container-tab-title">Instancias</h3>
              <bmb-divider type="simple"></bmb-divider>
              <ul class="bmb_timestream-dialog-container-tab-list">
                @for (date of getInstances(event); track $index) {
                  <li class="bmb_timestream-dialog-container-tab-item">
                    <span
                      class="bmb_timestream-dialog-container-tab-icon"
                      [ngClass]="
                        'bmb_timestream-detail-content-icon-' + event.type"
                    >
                      <bmb-icon icon="app_badging" />
                    </span>
                    <span>{{ date }}</span>
                  </li>
                }
              </ul>
              @if (event.diff) {
                <p class="bmb_timestream-dialog-container-tab-duration">
                  {{ getDurationString(event) }}
                </p>
              }
              <h3 class="bmb_timestream-dialog-container-tab-title">Relacionado a</h3>
              <bmb-divider type="simple"></bmb-divider>
              <ul class="bmb_timestream-dialog-container-tab-list">
                <li class="bmb_timestream-dialog-container-tab-item">
                  <span
                    class="bmb_timestream-dialog-container-tab-icon bmb_timestream-detail-content-icon-seriado"
                  >
                    <bmb-icon icon="app_badging" />
                  </span>
                  <span>{{ event.related_to }}</span>
                </li>
              </ul>
            </div>
          }
        }
      </bmb-tabs>
      <button bmbButton appearance="primary" icon="fit_screen">Ir a decisi√≥n </button>
    </section>
  </section>
}
