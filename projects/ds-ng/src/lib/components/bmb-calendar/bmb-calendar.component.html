<div class="bmb_calendar" [ngStyle]="{ height: getHeight(height) }">
  <bmb-calendar-template-mobile
    [now]="now"
    [lang]="lang"
    [events]="getEvents()"
    (onCurrentDateChange)="handleCurrentDateChange($event)"
    [weekDays]="renderWeekDays"
    [isListShowing]="isListShowing"
    (onViewTypeChange)="onViewTypeChange()"
  />
  <bmb-calendar-header
    [weekDays]="renderWeekDays"
    [lang]="lang"
    [view]="view()"
    [currentDate]="now"
    (onRangeChange)="handleDateChange($event, now)"
    (onCurrentDateChange)="handleCurrentDateChange($event)"
  />
  @if (isListShowing) {
    <bmb-calendar-template-event-list
      [events]="getEvents()"
      (onSelectEvent)="handleSelectEvent($event)"
    />
  } @else {
    @switch (view()) {
      @case ("day") {
        <bmb-calendar-template-day
          [now]="now"
          [events]="getEvents()"
          (onSelectEvent)="handleSelectEvent($event)"
        />
      }
      @case ("week") {
        <bmb-calendar-template-week
          [weekDays]="renderWeekDays"
          [lang]="lang"
          [hourFormat]="hourFormat"
          [now]="now"
          [events]="getEvents()"
          (onSelectEvent)="handleSelectEvent($event)"
        />
      }
      @case ("month") {
        <bmb-calendar-template-month
          [now]="now"
          [events]="getEvents()"
          (onSelectEvent)="handleSelectEvent($event)"
        />
      }
      @default {
        <bmb-calendar-template-week
          [weekDays]="renderWeekDays"
          [lang]="lang"
          [hourFormat]="hourFormat"
          [now]="now"
          [events]="getEvents()"
        />
      }
    }
  }

  @if (selectedEvent) {
    <bmb-calendar-template-event
      [event]="selectedEvent"
      (closeModal)="handleSelectEvent(null)"
    />
  }

  @if (getIsLoading()) {
    <section class="bmb_calendar-loader">
      <div class="bmb_loader-loading">
        <bmb-icon icon="progress_activity" class="bmb_loader-icon" />
      </div>
    </section>
  }
</div>
